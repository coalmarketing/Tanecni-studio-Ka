{% extends "layouts/base.njk" %}

{% block head %}
    <!-- Script for Netlify Identity -->
    <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <!-- Netlify Identity configuration -->
    <script defer src="/assets/js/identity.js"></script>

    <!-- To ensure proper validation, prevent errors, and encourage developers to check, schema's are an opt-in feature. They're very bespoke and requires some customising  -->
    <!-- Uncomment the code below to enable Structured Data, and test it when you deploy to Netlify - https://developers.google.com/search/docs/appearance/structured-data -->
    {% include "components/home-schema.njk" %}
{% endblock %}

{% block body %}
    <!-- HERO -->
    <section class="~py-12/24 ~px-4/8 relative flex items-end ~min-h-[40rem]/[64rem] lg:min-h-screen z-10
        before:absolute before:bottom-0 before:left-0 before:h-3/4 xl:before:h-1/2 before:w-full before:bg-gradient-to-t before:from-black before:to-black/0 before:-z-10">
        <div class="container mx-auto flex max-xl:flex-col justify-between xl:items-end ~gap-4/8 xl:gap-16">
            <!-- TOPPER + HEADING -->
            <div class="flex flex-col ~gap-2/4 items-start">
                <span class="topper bg-background">
                    <!-- LOGO ICON -->
                    <img
                        src="/assets/svgs/TS_Ka-logo-icon.svg"
                        alt="Ikona loga Taneční studio Ká"
                        width="18"
                        height="18"
                        loading="lazy"
                        decoding="async"
                        aria-hidden="true"
                        draggable="false">

                    <span>{{ hero.topper }}</span>
                </span>

                <h1 class="~max-w-xs/xl ~text-3xl/6xl text-white font-bold !leading-[1.1]">{{ hero.heading }}</h1>
            </div>

            <!-- TEXT + CTA -->
            <div class="flex flex-col ~gap-6/8">
                <!-- SUBHEADING + TEXT -->
                <div class="flex flex-col ~gap-2/4">
                    <h2 class="max-md:hidden ~text-lg/2xl text-white font-bold">{{ hero.subheading }}</h2>
                    <p class="~max-w-lg/2xl ~text-base/xl text-stone-200">{{ hero.text }}</p>
                </div>

                <!-- CTA BUTTONS -->
                <div class="flex flex-wrap ~gap-2/4">
                    {% for item in hero.cta %}
                        <a href="{{ item.url }}" target="{{ item.target }}" class="btn btn-lg even:btn-secondary">
                            {{ item.text }}
                        </a>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- BACKGROUND IMAGE -->
        <picture>
            <!-- MOBILE IMAGE -->
            <source media="(max-width: 600px)" srcset="{% getUrl hero.imageUrl | resize({ height: 1536, position: 'top' }) | avif %}" type="image/avif">
            <source media="(max-width: 600px)" srcset="{% getUrl hero.imageUrl | resize({ height: 1536, position: 'top' }) | webp %}" type="image/webp">
            <source media="(max-width: 600px)" srcset="{% getUrl hero.imageUrl | resize({ height: 1536, position: 'top' }) | jpeg %}" type="image/jpeg">
            <!-- TABLET IMAGE -->
            <source media="(max-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 1600, height: 2048, position: 'top' }) | avif %}" type="image/avif">
            <source media="(max-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 1600, height: 2048, position: 'top' }) | webp %}" type="image/webp">
            <source media="(max-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 1600, height: 2048, position: 'top' }) | jpeg %}" type="image/jpeg">
            <!-- DESKTOP IMAGE -->
            <source media="(min-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 2880, height: 1620, position: 'top' }) | avif %}" type="image/avif">
            <source media="(min-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 2880, height: 1620, position: 'top' }) | webp %}" type="image/webp">
            <source media="(min-width: 1024px)" srcset="{% getUrl hero.imageUrl | resize({ width: 2880, height: 1620, position: 'top' }) | jpeg %}" type="image/jpeg">
            <img
                class="object-cover absolute top-0 left-0 h-full w-full -z-20"
                src="{% getUrl hero.imageUrl | resize({ width: 2880, height: 1620, position: 'top' }) | jpeg %}"
                alt="{{ hero.imageAlt }}"
                width="1920"
                height="1080"
                loading="lazy"
                decoding="async"
                aria-hidden="true"
                draggable="false"
                fetchpriority="high">
        </picture>
    </section>

    <!-- COURSES -->
    <section id="kurzy" class="py-24 ~px-4/8 bg-background dark:bg-stone-950">
        <div class="container m-auto flex flex-col gap-12">
            <!-- TOPPER + HEADING -->
            <div class="flex flex-col items-center gap-2">
                <span class="topper bg-accent-secondary">
                    {{ courses.topper }}
                </span>

                <h2 class="~max-w-sm/xl text-center ~text-3xl/5xl text-white font-bold !leading-[1.1]">{{ courses.heading }}</h2>
            </div>

            <!-- COURSES -->
            <ul class="grid grid-cols-12 ~gap-4/6">
                {% for item in courses.items %}
                    <li class="md:[&:nth-last-child(n+4)]:col-span-6 xl:[&:nth-last-child(n+4)]:col-span-3 col-span-12 lg:col-span-4">
                        <a
                            href="{{ item.url }}"
                            class="group relative flex flex-col justify-end gap-0.5 h-[24rem] p-6 rounded-3xl overflow-hidden z-10
                            before:absolute before:top-0 before:left-0 before:h-full before:w-full before:bg-gradient-to-t before:from-black before:via-50% before:via-black/25 before:to-black/0 before:-z-10"
                        >
                            <!-- LOCATION BADGE -->
                            <span
                                class="absolute top-4 right-4 py-1 px-4 text-sm text-white font-medium whitespace-nowrap rounded-lg
                                {%- if item.location === 'velký sál' %} bg-primary {%- else %} bg-secondary {%- endif %}"
                            >
                                {{ item.location }}
                            </span>

                            <!-- TITLE + SUBTITLE -->
                            <h3 class="~text-xl/2xl text-white font-semibold">{{ item.title }}</h3>

                            {% if item.subtitle %}
                                <span class="~text-lg/xl text-stone-200 font-light">{{ item.subtitle }}</span>
                            {% endif %}

                            <!-- BACKGROUND IMAGE -->
                            <picture>
                                <!-- MOBILE IMAGE -->
                                <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | avif %}" type="image/avif">
                                <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | webp %}" type="image/webp">
                                <source media="(max-width: 600px)" srcset="{% getUrl item.imageUrl | jpeg %}" type="image/jpeg">
                                <!-- TABLET IMAGE -->
                                <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | avif %}" type="image/avif">
                                <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | webp %}" type="image/webp">
                                <source media="(max-width: 1024px)" srcset="{% getUrl item.imageUrl | jpeg %}" type="image/jpeg">
                                <!-- DESKTOP IMAGE -->
                                <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 732, height: 768 }) | avif %}" type="image/avif">
                                <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 732, height: 768 }) | webp %}" type="image/webp">
                                <source media="(min-width: 1024px)" srcset="{% getUrl item.imageUrl | resize({ width: 732, height: 768 }) | jpeg %}" type="image/jpeg">
                                <img
                                    class="object-cover absolute top-0 left-0 h-full w-full -z-20 transition-transform duration-300 group-hover:scale-110"
                                    src="{% getUrl item.imageUrl | resize({ width: 732, height: 768 }) | jpeg %}"
                                    alt="{{ item.imageAlt }}"
                                    width="366"
                                    height="384"
                                    loading="lazy"
                                    decoding="async"
                                    aria-hidden="true"
                                    draggable="false">
                            </picture>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </section>

    <!-- ABOUT US + OUR TEAM -->
    <div class="relative bg-white dark:bg-stone-900 overflow-hidden z-10">
        <!-- ABOUT US -->
        <section class="py-24 ~px-4/8">
            <div class="container m-auto flex max-xl:flex-col items-center ~gap-12/24">
                <!-- IMAGE -->
                <picture>
                    <!-- MOBILE IMAGE -->
                    <source media="(max-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 736, height: 490 }) | avif %}" type="image/avif">
                    <source media="(max-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 736, height: 490 }) | webp %}" type="image/webp">
                    <source media="(max-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 736, height: 490 }) | jpeg %}" type="image/jpeg">
                    <!-- DESKTOP IMAGE -->
                    <source media="(min-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 1724, height: 1150 }) | avif %}" type="image/avif">
                    <source media="(min-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 1724, height: 1150 }) | webp %}" type="image/webp">
                    <source media="(min-width: 600px)" srcset="{% getUrl about.imageUrl | resize({ width: 1724, height: 1150 }) | jpeg %}" type="image/jpeg">
                    <img
                        class="object-cover rounded-4xl"
                        src="{% getUrl about.imageUrl | resize({ width: 1724, height: 1150 }) | jpeg %}"
                        alt="{{ about.imageAlt }}"
                        width="862"
                        height="575"
                        loading="lazy"
                        decoding="async"
                        aria-hidden="true"
                        draggable="false">
                </picture>

                <!-- TEXT + CTA -->
                <div class="xl:shrink-0 flex flex-col gap-8">
                    <!-- HEADING + TEXT -->
                    <div class="flex flex-col gap-4">
                        <!-- TOPPER + HEADING -->
                        <div class="flex flex-col items-start gap-2">
                            <span class="topper">{{ about.topper }}</span>
                            <h2 class="~max-w-xs/lg ~text-3xl/5xl text-black dark:text-white font-bold !leading-[1.1]">{{ about.heading | safe }}</h2>
                        </div>

                        <p class="max-w-xl ~text-sm/base text-stone-800 dark:text-stone-200">{{ about.text }}</p>
                    </div>

                    <!-- BENEFITS -->
                    <ul class="grid grid-cols-2 sm:grid-cols-3 gap-2 max-w-xl">
                        {% for item in about.items %}
                            <li class="flex flex-col gap-4 p-4 bg-background rounded-2xl">
                                <!-- ICON -->
                                <img
                                    src="{{ item.iconUrl }}"
                                    alt="{{ item.iconAlt }}"
                                    width="32"
                                    height="32"
                                    loading="lazy"
                                    decoding="async"
                                    aria-hidden="true"
                                    draggable="false">

                                <span class="~text-base/lg text-white font-semibold">{{ item.title | safe }}</span>
                            </li>
                        {% endfor %}
                    </ul>

                    <!-- CTA -->
                    <a href="{{ about.ctaUrl }}" class="btn self-start">{{ about.cta }}</a>
                </div>
            </div>
        </section>

        {% include "sections/our-team.njk" %}

        <!-- BACKGROUND DECORATION -->
        <img
            class="absolute ~top-[-4rem]/[2rem] ~left-[-12rem]/[-18rem] ~h-[24rem]/[53rem] w-auto opacity-50 rotate-[30deg] -z-10"
            src="/assets/svgs/TS_Ka-logo-icon.svg"
            alt="Ikona loga tanečního studia Ká"
            width="687"
            height="850"
            loading="lazy"
            decoding="async"
            aria-hidden="true"
            draggable="false">

        <img
            class="max-md:hidden absolute bottom-[52rem] xl:bottom-96 -right-40 ~h-[16rem]/[28rem] w-auto opacity-50 -rotate-[45deg] -z-10"
            src="/assets/svgs/TS_Ka-logo-icon.svg"
            alt="Ikona loga tanečního studia Ká"
            width="468"
            height="579"
            loading="lazy"
            decoding="async"
            aria-hidden="true"
            draggable="false">
    </div>

    <!-- GALLERY -->
    <section class="py-24 ~px-4/8 bg-stone-100 dark:bg-stone-950">
        <div class="container m-auto flex flex-col gap-12">
            <!-- TOPPER + HEADING -->
            <div class="flex flex-col items-start gap-2">
                <span class="topper">{{ gallery.topper }}</span>
                <h2 class="~text-3xl/5xl text-black dark:text-white font-bold !leading-[1.1]">{{ gallery.heading }}</h2>
            </div>

            <!-- GALLERY PHOTOS -->
            <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-rows-4 ~gap-2/6 xl:h-[80rem]">
                {% for i in range(8) %}
                    {% set imageUrl = '/assets/images/gallery/tanecni-studio-ka_gallery-' + loop.index + '.jpg' %}

                    <li class="xl:first:col-span-2 xl:first:row-span-2 xl:[&:nth-child(2)]:row-span-2 xl:[&:nth-child(6)]:row-span-2 xl:[&:nth-child(7)]:col-span-2 xl:[&:nth-child(7)]:row-span-2">
                        <picture>
                            <!-- TABLET IMAGE -->
                            <source media="(max-width: 1280px)" srcset="{% getUrl imageUrl | resize({ width: 752, height: 752 }) | avif %}" type="image/avif">
                            <source media="(max-width: 1280px)" srcset="{% getUrl imageUrl | resize({ width: 752, height: 752 }) | webp %}" type="image/webp">
                            <source media="(max-width: 1280px)" srcset="{% getUrl imageUrl | resize({ width: 752, height: 752 }) | jpeg %}" type="image/jpeg">
                            <!-- DESKTOP IMAGE -->
                            <source media="(min-width: 1280px)" srcset="{% getUrl imageUrl | resize({ height: 1258 }) | avif %}" type="image/avif">
                            <source media="(min-width: 1280px)" srcset="{% getUrl imageUrl | resize({ height: 1258 }) | webp %}" type="image/webp">
                            <source media="(min-width: 1280px)" srcset="{% getUrl imageUrl | resize({ height: 1258 }) | jpeg %}" type="image/jpeg">
                            <img
                                class="object-cover h-full w-full max-xl:aspect-square rounded-3xl"
                                src="{% getUrl imageUrl | resize({ height: 1258 }) | jpeg %}"
                                alt="Galerie tanečního studio Ká {{ loop.index }}"
                                width="756"
                                height="628"
                                loading="lazy"
                                decoding="async"
                                aria-hidden="true"
                                draggable="false">
                        </picture>
                    </li>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- BLOG -->
    <section class="py-24 ~px-4/8 bg-white dark:bg-stone-900">
        <div class="container m-auto flex flex-col gap-12">
            <!-- HEADING + TEXT -->
            <div class="flex max-lg:flex-col justify-between lg:items-end gap-4 lg:gap-16">
                <!-- TOPPER + HEADING -->
                <div class="flex flex-col items-start gap-2">
                    <span class="topper">{{ blog.topper }}</span>
                    <h2 class="~text-3xl/5xl text-black dark:text-white font-bold !leading-[1.1]">{{ blog.heading }}</h2>
                </div>

                <p class="max-w-xl ~text-sm/base text-stone-800 dark:text-stone-200">{{ blog.text }}</p>
            </div>

            {% if collections.post | length === 0 %}
                <p class="~text-sm/base text-stone-800 dark:text-stone-200">{{ blog.noPosts }}</p>
            {% else %}
                <ul class="grid grid-cols-1 lg:grid-cols-3 ~gap-4/6">
                    {% for post in collections.post | limit(3) | reverse %}
                        <li class="group/li">
                            <a href="{{ post.url }}" class="group/a relative flex flex-col justify-end items-start gap-2 h-[24rem] py-4 px-6 rounded-3xl overflow-hidden z-10
                            before:absolute before:top-0 before:left-0 before:h-full before:w-full before:bg-gradient-to-t before:from-black before:to-black/0 before:-z-10">
                                <!-- POST DATE -->
                                <span class="absolute top-4 right-4 py-1 px-4 bg-background text-sm text-white font-medium whitespace-nowrap rounded-lg">
                                    {{ post.data.date | postDate }}
                                </span>

                                <!-- BLOG TITLE -->
                                <h3 class="~text-xl/2xl text-white font-semibold">{{ post.data.title }}</h3>
                                <p class="~text-base/lg text-stone-200 line-clamp-2">{{ post.data.description }}</p>

                                <picture>
                                    <!-- MOBILE IMAGE -->
                                    <source media="(max-width: 600px)" srcset="{% getUrl post.data.image | resize({ width: 736, height: 768 }) | avif %}" type="image/avif">
                                    <source media="(max-width: 600px)" srcset="{% getUrl post.data.image | resize({ width: 736, height: 768 }) | webp %}" type="image/webp">
                                    <source media="(max-width: 600px)" srcset="{% getUrl post.data.image | resize({ width: 736, height: 768 }) | jpeg %}" type="image/jpeg">
                                    <!-- TABLET IMAGE -->
                                    <source media="(max-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 1524, height: 768 }) | avif %}" type="image/avif">
                                    <source media="(max-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 1524, height: 768 }) | webp %}" type="image/webp">
                                    <source media="(max-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 1524, height: 768 }) | jpeg %}" type="image/jpeg">
                                    <!-- DESKTOP IMAGE -->
                                    <source media="(min-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 992, height: 768 }) | avif %}" type="image/avif">
                                    <source media="(min-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 992, height: 768 }) | webp %}" type="image/webp">
                                    <source media="(min-width: 1024px)" srcset="{% getUrl post.data.image | resize({ width: 992, height: 768 }) | jpeg %}" type="image/jpeg">
                                    <img
                                        class="object-cover absolute top-0 left-0 h-full w-full -z-20 transition-transform duration-300 group-hover/a:scale-110"
                                        src="{% getUrl post.data.image | resize({ width: 992, height: 768 }) | jpeg %}"
                                        alt="{{ post.data.imageAlt }}"
                                        width="496"
                                        height="384"
                                        loading="lazy"
                                        decoding="async"
                                        aria-hidden="true"
                                        draggable="false">
                                </picture>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}

            <a href="{{ blog.ctaUrl }}" class="btn self-center">{{ blog.cta }}</a>
        </div>
    </section>

    {% include "sections/locations.njk" %}
    {% include "sections/reviews.njk" %}
    {% include "sections/partners.njk" %}
{% endblock body %}